import measure_theory.function.l1_space
import analysis.normed_space.indicator_function
noncomputable theory
open set filter topological_space measure_theory function
open_locale classical topological_space interval big_operators filter ennreal measure_theory
variables {Œ± Œ≤ E F : Type*} [measurable_space Œ±]
section
variables [topological_space Œ≤] {l l' : filter Œ±} {f g : Œ± ‚Üí Œ≤} {Œº ŒΩ : measure Œ±}
def strongly_measurable_at_filter (f : Œ± ‚Üí Œ≤) (l : filter Œ±) (Œº : measure Œ± . volume_tac) :=
‚àÉ s ‚àà l, ae_strongly_measurable f (Œº.restrict s)
@[simp] lemma strongly_measurable_at_bot {f : Œ± ‚Üí Œ≤} : strongly_measurable_at_filter f ‚ä• Œº :=
‚ü®‚àÖ, mem_bot, by simp‚ü©
protected lemma strongly_measurable_at_filter.eventually (h : strongly_measurable_at_filter f l Œº) :
  ‚àÄ·∂† s in l.small_sets, ae_strongly_measurable f (Œº.restrict s) :=
(eventually_small_sets' $ Œª s t, ae_strongly_measurable.mono_set).2 h
protected lemma strongly_measurable_at_filter.filter_mono
  (h : strongly_measurable_at_filter f l Œº) (h' : l' ‚â§ l) :
  strongly_measurable_at_filter f l' Œº :=
let ‚ü®s, hsl, hs‚ü© := h in ‚ü®s, h' hsl, hs‚ü©
protected lemma measure_theory.ae_strongly_measurable.strongly_measurable_at_filter
  (h : ae_strongly_measurable f Œº) :
  strongly_measurable_at_filter f l Œº :=
‚ü®univ, univ_mem, by rwa measure.restrict_univ‚ü©
lemma ae_strongly_measurable.strongly_measurable_at_filter_of_mem
  {s} (h : ae_strongly_measurable f (Œº.restrict s)) (hl : s ‚àà l) :
  strongly_measurable_at_filter f l Œº :=
‚ü®s, hl, h‚ü©
protected lemma measure_theory.strongly_measurable.strongly_measurable_at_filter
  (h : strongly_measurable f) :
  strongly_measurable_at_filter f l Œº :=
h.ae_strongly_measurable.strongly_measurable_at_filter
end
namespace measure_theory
section normed_group
lemma has_finite_integral_restrict_of_bounded [normed_group E] {f : Œ± ‚Üí E} {s : set Œ±}
  {Œº : measure Œ±} {C}  (hs : Œº s < ‚àû) (hf : ‚àÄ·µê x ‚àÇ(Œº.restrict s), ‚à•f x‚à• ‚â§ C) :
  has_finite_integral f (Œº.restrict s) :=
by haveI : is_finite_measure (Œº.restrict s) := ‚ü®by rwa [measure.restrict_apply_univ]‚ü©;
  exact has_finite_integral_of_bounded hf
variables [normed_group E] {f g : Œ± ‚Üí E} {s t : set Œ±} {Œº ŒΩ : measure Œ±}
def integrable_on (f : Œ± ‚Üí E) (s : set Œ±) (Œº : measure Œ± . volume_tac) : Prop :=
integrable f (Œº.restrict s)
lemma integrable_on.integrable (h : integrable_on f s Œº) :
  integrable f (Œº.restrict s) := h
@[simp] lemma integrable_on_empty : integrable_on f ‚àÖ Œº :=
by simp [integrable_on, integrable_zero_measure]
@[simp] lemma integrable_on_univ : integrable_on f univ Œº ‚Üî integrable f Œº :=
by rw [integrable_on, measure.restrict_univ]
lemma integrable_on_zero : integrable_on (Œª _, (0:E)) s Œº := integrable_zero _ _ _
@[simp] lemma integrable_on_const {C : E} : integrable_on (Œª _, C) s Œº ‚Üî C = 0 ‚à® Œº s < ‚àû :=
integrable_const_iff.trans $ by rw [measure.restrict_apply_univ]
lemma integrable_on.mono (h : integrable_on f t ŒΩ) (hs : s ‚äÜ t) (hŒº : Œº ‚â§ ŒΩ) :
  integrable_on f s Œº :=
h.mono_measure $ measure.restrict_mono hs hŒº
lemma integrable_on.mono_set (h : integrable_on f t Œº) (hst : s ‚äÜ t) :
  integrable_on f s Œº :=
h.mono hst le_rfl
lemma integrable_on.mono_measure (h : integrable_on f s ŒΩ) (hŒº : Œº ‚â§ ŒΩ) :
  integrable_on f s Œº :=
h.mono (subset.refl _) hŒº
lemma integrable_on.mono_set_ae (h : integrable_on f t Œº) (hst : s ‚â§·µê[Œº] t) :
  integrable_on f s Œº :=
h.integrable.mono_measure $ measure.restrict_mono_ae hst
lemma integrable_on.congr_set_ae (h : integrable_on f t Œº) (hst : s =·µê[Œº] t) :
  integrable_on f s Œº :=
h.mono_set_ae hst.le
lemma integrable_on.congr_fun' (h : integrable_on f s Œº) (hst : f =·µê[Œº.restrict s] g) :
  integrable_on g s Œº :=
integrable.congr h hst
lemma integrable_on.congr_fun (h : integrable_on f s Œº) (hst : eq_on f g s)
  (hs : measurable_set s) :
  integrable_on g s Œº :=
h.congr_fun' ((ae_restrict_iff' hs).2 (eventually_of_forall hst))
lemma integrable.integrable_on (h : integrable f Œº) : integrable_on f s Œº :=
h.mono_measure $ measure.restrict_le_self
lemma integrable.integrable_on' (h : integrable f (Œº.restrict s)) : integrable_on f s Œº :=
h
lemma integrable_on.restrict (h : integrable_on f s Œº) (hs : measurable_set s) :
  integrable_on f s (Œº.restrict t) :=
by { rw [integrable_on, measure.restrict_restrict hs], exact h.mono_set (inter_subset_left _ _) }
lemma integrable_on.left_of_union (h : integrable_on f (s ‚à™ t) Œº) : integrable_on f s Œº :=
h.mono_set $ subset_union_left _ _
lemma integrable_on.right_of_union (h : integrable_on f (s ‚à™ t) Œº) : integrable_on f t Œº :=
h.mono_set $ subset_union_right _ _
lemma integrable_on.union (hs : integrable_on f s Œº) (ht : integrable_on f t Œº) :
  integrable_on f (s ‚à™ t) Œº :=
(hs.add_measure ht).mono_measure $ measure.restrict_union_le _ _
@[simp] lemma integrable_on_union :
  integrable_on f (s ‚à™ t) Œº ‚Üî integrable_on f s Œº ‚àß integrable_on f t Œº :=
‚ü®Œª h, ‚ü®h.left_of_union, h.right_of_union‚ü©, Œª h, h.1.union h.2‚ü©
@[simp] lemma integrable_on_singleton_iff {x : Œ±} [measurable_singleton_class Œ±] :
  integrable_on f {x} Œº ‚Üî f x = 0 ‚à® Œº {x} < ‚àû :=
begin
  have : f =·µê[Œº.restrict {x}] (Œª y, f x),
  { filter_upwards [ae_restrict_mem (measurable_set_singleton x)] with _ ha,
    simp only [mem_singleton_iff.1 ha], },
  rw [integrable_on, integrable_congr this, integrable_const_iff],
  simp,
end
@[simp] lemma integrable_on_finite_Union {s : set Œ≤} (hs : s.finite)
  {t : Œ≤ ‚Üí set Œ±} : integrable_on f (‚ãÉ i ‚àà s, t i) Œº ‚Üî ‚àÄ i ‚àà s, integrable_on f (t i) Œº :=
begin
  apply hs.induction_on,
  { simp },
  { intros a s ha hs hf, simp [hf, or_imp_distrib, forall_and_distrib] }
end
@[simp] lemma integrable_on_finset_Union {s : finset Œ≤} {t : Œ≤ ‚Üí set Œ±} :
  integrable_on f (‚ãÉ i ‚àà s, t i) Œº ‚Üî ‚àÄ i ‚àà s, integrable_on f (t i) Œº :=
integrable_on_finite_Union s.finite_to_set
@[simp] lemma integrable_on_fintype_Union [fintype Œ≤] {t : Œ≤ ‚Üí set Œ±} :
  integrable_on f (‚ãÉ i, t i) Œº ‚Üî ‚àÄ i, integrable_on f (t i) Œº :=
by simpa using @integrable_on_finset_Union _ _ _ _ _ f Œº finset.univ t
lemma integrable_on.add_measure (hŒº : integrable_on f s Œº) (hŒΩ : integrable_on f s ŒΩ) :
  integrable_on f s (Œº + ŒΩ) :=
by { delta integrable_on, rw measure.restrict_add, exact hŒº.integrable.add_measure hŒΩ }
@[simp] lemma integrable_on_add_measure :
  integrable_on f s (Œº + ŒΩ) ‚Üî integrable_on f s Œº ‚àß integrable_on f s ŒΩ :=
‚ü®Œª h, ‚ü®h.mono_measure (measure.le_add_right le_rfl),
  h.mono_measure (measure.le_add_left le_rfl)‚ü©,
  Œª h, h.1.add_measure h.2‚ü©
lemma _root_.measurable_embedding.integrable_on_map_iff [measurable_space Œ≤] {e : Œ± ‚Üí Œ≤}
  (he : measurable_embedding e) {f : Œ≤ ‚Üí E} {Œº : measure Œ±} {s : set Œ≤} :
  integrable_on f s (measure.map e Œº) ‚Üî integrable_on (f ‚àò e) (e ‚Åª¬π' s) Œº :=
by simp only [integrable_on, he.restrict_map, he.integrable_map_iff]
lemma integrable_on_map_equiv [measurable_space Œ≤] (e : Œ± ‚âÉ·µê Œ≤) {f : Œ≤ ‚Üí E} {Œº : measure Œ±}
  {s : set Œ≤} :
  integrable_on f s (measure.map e Œº) ‚Üî integrable_on (f ‚àò e) (e ‚Åª¬π' s) Œº :=
by simp only [integrable_on, e.restrict_map, integrable_map_equiv e]
lemma measure_preserving.integrable_on_comp_preimage [measurable_space Œ≤] {e : Œ± ‚Üí Œ≤} {ŒΩ}
  (h‚ÇÅ : measure_preserving e Œº ŒΩ) (h‚ÇÇ : measurable_embedding e) {f : Œ≤ ‚Üí E} {s : set Œ≤} :
  integrable_on (f ‚àò e) (e ‚Åª¬π' s) Œº ‚Üî integrable_on f s ŒΩ :=
(h‚ÇÅ.restrict_preimage_emb h‚ÇÇ s).integrable_comp_emb h‚ÇÇ
lemma measure_preserving.integrable_on_image [measurable_space Œ≤] {e : Œ± ‚Üí Œ≤} {ŒΩ}
  (h‚ÇÅ : measure_preserving e Œº ŒΩ) (h‚ÇÇ : measurable_embedding e) {f : Œ≤ ‚Üí E} {s : set Œ±} :
  integrable_on f (e '' s) ŒΩ ‚Üî  integrable_on (f ‚àò e) s Œº :=
((h‚ÇÅ.restrict_image_emb h‚ÇÇ s).integrable_comp_emb h‚ÇÇ).symm
lemma integrable_indicator_iff (hs : measurable_set s) :
  integrable (indicator s f) Œº ‚Üî integrable_on f s Œº :=
by simp [integrable_on, integrable, has_finite_integral, nnnorm_indicator_eq_indicator_nnnorm,
  ennreal.coe_indicator, lintegral_indicator _ hs, ae_strongly_measurable_indicator_iff hs]
lemma integrable_on.indicator (h : integrable_on f s Œº) (hs : measurable_set s) :
  integrable (indicator s f) Œº :=
(integrable_indicator_iff hs).2 h
lemma integrable.indicator (h : integrable f Œº) (hs : measurable_set s) :
  integrable (indicator s f) Œº :=
h.integrable_on.indicator hs
lemma integrable_indicator_const_Lp {E} [normed_group E]
  {p : ‚Ñù‚â•0‚àû} {s : set Œ±} (hs : measurable_set s) (hŒºs : Œº s ‚â† ‚àû) (c : E) :
  integrable (indicator_const_Lp p hs hŒºs c) Œº :=
begin
  rw [integrable_congr indicator_const_Lp_coe_fn, integrable_indicator_iff hs, integrable_on,
    integrable_const_iff, lt_top_iff_ne_top],
  right,
  simpa only [set.univ_inter, measurable_set.univ, measure.restrict_apply] using hŒºs,
end
lemma integrable_on_iff_integable_of_support_subset {f : Œ± ‚Üí E} {s : set Œ±}
  (h1s : support f ‚äÜ s) (h2s : measurable_set s) :
  integrable_on f s Œº ‚Üî integrable f Œº :=
begin
  refine ‚ü®Œª h, _, Œª h, h.integrable_on‚ü©,
  rwa [‚Üê indicator_eq_self.2 h1s, integrable_indicator_iff h2s]
end
lemma integrable_on_Lp_of_measure_ne_top {E} [normed_group E]
  {p : ‚Ñù‚â•0‚àû} {s : set Œ±} (f : Lp E p Œº) (hp : 1 ‚â§ p) (hŒºs : Œº s ‚â† ‚àû) :
  integrable_on f s Œº :=
begin
  refine mem_‚Ñíp_one_iff_integrable.mp _,
  have hŒº_restrict_univ : (Œº.restrict s) set.univ < ‚àû,
    by simpa only [set.univ_inter, measurable_set.univ, measure.restrict_apply, lt_top_iff_ne_top],
  haveI hŒº_finite : is_finite_measure (Œº.restrict s) := ‚ü®hŒº_restrict_univ‚ü©,
  exact ((Lp.mem_‚Ñíp _).restrict s).mem_‚Ñíp_of_exponent_le hp,
end
def integrable_at_filter (f : Œ± ‚Üí E) (l : filter Œ±) (Œº : measure Œ± . volume_tac) :=
‚àÉ s ‚àà l, integrable_on f s Œº
variables {l l' : filter Œ±}
protected lemma integrable_at_filter.eventually (h : integrable_at_filter f l Œº) :
  ‚àÄ·∂† s in l.small_sets, integrable_on f s Œº :=
iff.mpr (eventually_small_sets' $ Œª s t hst ht, ht.mono_set hst) h
lemma integrable_at_filter.filter_mono (hl : l ‚â§ l') (hl' : integrable_at_filter f l' Œº) :
  integrable_at_filter f l Œº :=
let ‚ü®s, hs, hsf‚ü© := hl' in ‚ü®s, hl hs, hsf‚ü©
lemma integrable_at_filter.inf_of_left (hl : integrable_at_filter f l Œº) :
  integrable_at_filter f (l ‚äì l') Œº :=
hl.filter_mono inf_le_left
lemma integrable_at_filter.inf_of_right (hl : integrable_at_filter f l Œº) :
  integrable_at_filter f (l' ‚äì l) Œº :=
hl.filter_mono inf_le_right
@[simp] lemma integrable_at_filter.inf_ae_iff {l : filter Œ±} :
  integrable_at_filter f (l ‚äì Œº.ae) Œº ‚Üî integrable_at_filter f l Œº :=
begin
  refine ‚ü®_, Œª h, h.filter_mono inf_le_left‚ü©,
  rintros ‚ü®s, ‚ü®t, ht, u, hu, rfl‚ü©, hf‚ü©,
  refine ‚ü®t, ht, _‚ü©,
  refine hf.integrable.mono_measure (Œª v hv, _),
  simp only [measure.restrict_apply hv],
  refine measure_mono_ae (mem_of_superset hu $ Œª x hx, _),
  exact Œª ‚ü®hv, ht‚ü©, ‚ü®hv, ‚ü®ht, hx‚ü©‚ü©
end
alias integrable_at_filter.inf_ae_iff ‚Üî integrable_at_filter.of_inf_ae _
lemma measure.finite_at_filter.integrable_at_filter {l : filter Œ±} [is_measurably_generated l]
  (hfm : strongly_measurable_at_filter f l Œº) (hŒº : Œº.finite_at_filter l)
  (hf : l.is_bounded_under (‚â§) (norm ‚àò f)) :
  integrable_at_filter f l Œº :=
begin
  obtain ‚ü®C, hC‚ü© : ‚àÉ C, ‚àÄ·∂† s in l.small_sets, ‚àÄ x ‚àà s, ‚à•f x‚à• ‚â§ C,
    from hf.imp (Œª C hC, eventually_small_sets.2 ‚ü®_, hC, Œª t, id‚ü©),
  rcases (hfm.eventually.and (hŒº.eventually.and hC)).exists_measurable_mem_of_small_sets
    with ‚ü®s, hsl, hsm, hfm, hŒº, hC‚ü©,
  refine ‚ü®s, hsl, ‚ü®hfm, has_finite_integral_restrict_of_bounded hŒº _‚ü©‚ü©,
  exact C,
  rw [ae_restrict_eq hsm, eventually_inf_principal],
  exact eventually_of_forall hC
end
lemma measure.finite_at_filter.integrable_at_filter_of_tendsto_ae
  {l : filter Œ±} [is_measurably_generated l] (hfm : strongly_measurable_at_filter f l Œº)
  (hŒº : Œº.finite_at_filter l) {b} (hf : tendsto f (l ‚äì Œº.ae) (ùìù b)) :
  integrable_at_filter f l Œº :=
(hŒº.inf_of_left.integrable_at_filter (hfm.filter_mono inf_le_left)
  hf.norm.is_bounded_under_le).of_inf_ae
alias measure.finite_at_filter.integrable_at_filter_of_tendsto_ae ‚Üê
  _root_.filter.tendsto.integrable_at_filter_ae
lemma measure.finite_at_filter.integrable_at_filter_of_tendsto {l : filter Œ±}
  [is_measurably_generated l] (hfm : strongly_measurable_at_filter f l Œº)
  (hŒº : Œº.finite_at_filter l) {b} (hf : tendsto f l (ùìù b)) :
  integrable_at_filter f l Œº :=
hŒº.integrable_at_filter hfm hf.norm.is_bounded_under_le
alias measure.finite_at_filter.integrable_at_filter_of_tendsto ‚Üê
  _root_.filter.tendsto.integrable_at_filter
lemma integrable_add_of_disjoint {f g : Œ± ‚Üí E}
  (h : disjoint (support f) (support g)) (hf : strongly_measurable f) (hg : strongly_measurable g) :
  integrable (f + g) Œº ‚Üî integrable f Œº ‚àß integrable g Œº :=
begin
  refine ‚ü®Œª hfg, ‚ü®_, _‚ü©, Œª h, h.1.add h.2‚ü©,
  { rw ‚Üê indicator_add_eq_left h, exact hfg.indicator hf.measurable_set_support },
  { rw ‚Üê indicator_add_eq_right h, exact hfg.indicator hg.measurable_set_support }
end
end normed_group
end measure_theory
open measure_theory
variables [normed_group E]
lemma continuous_on.ae_measurable [topological_space Œ±] [opens_measurable_space Œ±]
  [measurable_space Œ≤] [topological_space Œ≤] [borel_space Œ≤]
  {f : Œ± ‚Üí Œ≤} {s : set Œ±} {Œº : measure Œ±} (hf : continuous_on f s) (hs : measurable_set s) :
  ae_measurable f (Œº.restrict s) :=
begin
  nontriviality Œ±, inhabit Œ±,
  have : piecewise s f (Œª _, f default) =·µê[Œº.restrict s] f := piecewise_ae_eq_restrict hs,
  refine ‚ü®piecewise s f (Œª _, f default), _, this.symm‚ü©,
  apply measurable_of_is_open,
  assume t ht,
  obtain ‚ü®u, u_open, hu‚ü© : ‚àÉ (u : set Œ±), is_open u ‚àß f ‚Åª¬π' t ‚à© s = u ‚à© s :=
    _root_.continuous_on_iff'.1 hf t ht,
  rw [piecewise_preimage, set.ite, hu],
  exact (u_open.measurable_set.inter hs).union ((measurable_const ht.measurable_set).diff hs)
end
lemma continuous_on.ae_strongly_measurable_of_is_separable
  [topological_space Œ±] [pseudo_metrizable_space Œ±] [opens_measurable_space Œ±]
  [topological_space Œ≤] [pseudo_metrizable_space Œ≤]
  {f : Œ± ‚Üí Œ≤} {s : set Œ±} {Œº : measure Œ±} (hf : continuous_on f s) (hs : measurable_set s)
  (h's : topological_space.is_separable s) :
  ae_strongly_measurable f (Œº.restrict s) :=
begin
  letI := pseudo_metrizable_space_pseudo_metric Œ±,
  borelize Œ≤,
  rw ae_strongly_measurable_iff_ae_measurable_separable,
  refine ‚ü®hf.ae_measurable hs, f '' s, hf.is_separable_image h's, _‚ü©,
  exact mem_of_superset (self_mem_ae_restrict hs) (subset_preimage_image _ _),
end
lemma continuous_on.ae_strongly_measurable
  [topological_space Œ±] [topological_space Œ≤] [h : second_countable_topology_either Œ± Œ≤]
  [opens_measurable_space Œ±] [pseudo_metrizable_space Œ≤]
  {f : Œ± ‚Üí Œ≤} {s : set Œ±} {Œº : measure Œ±} (hf : continuous_on f s) (hs : measurable_set s) :
  ae_strongly_measurable f (Œº.restrict s) :=
begin
  borelize Œ≤,
  refine ae_strongly_measurable_iff_ae_measurable_separable.2 ‚ü®hf.ae_measurable hs, f '' s, _,
    mem_of_superset (self_mem_ae_restrict hs) (subset_preimage_image _ _)‚ü©,
  casesI h.out,
  { let f' : s ‚Üí Œ≤ := s.restrict f,
    have A : continuous f' := continuous_on_iff_continuous_restrict.1 hf,
    have B : is_separable (univ : set s) := is_separable_of_separable_space _,
    convert is_separable.image B A using 1,
    ext x,
    simp },
  { exact is_separable_of_separable_space _ }
end
lemma continuous_on.integrable_at_nhds_within_of_is_separable
  [topological_space Œ±] [pseudo_metrizable_space Œ±]
  [opens_measurable_space Œ±] {Œº : measure Œ±} [is_locally_finite_measure Œº]
  {a : Œ±} {t : set Œ±} {f : Œ± ‚Üí E} (hft : continuous_on f t) (ht : measurable_set t)
  (h't : topological_space.is_separable t) (ha : a ‚àà t) :
  integrable_at_filter f (ùìù[t] a) Œº :=
begin
  haveI : (ùìù[t] a).is_measurably_generated := ht.nhds_within_is_measurably_generated _,
  exact (hft a ha).integrable_at_filter ‚ü®_, self_mem_nhds_within,
    hft.ae_strongly_measurable_of_is_separable ht h't‚ü© (Œº.finite_at_nhds_within _ _),
end
lemma continuous_on.integrable_at_nhds_within
  [topological_space Œ±] [second_countable_topology_either Œ± E]
  [opens_measurable_space Œ±] {Œº : measure Œ±} [is_locally_finite_measure Œº]
  {a : Œ±} {t : set Œ±} {f : Œ± ‚Üí E} (hft : continuous_on f t) (ht : measurable_set t) (ha : a ‚àà t) :
  integrable_at_filter f (ùìù[t] a) Œº :=
begin
  haveI : (ùìù[t] a).is_measurably_generated := ht.nhds_within_is_measurably_generated _,
  exact (hft a ha).integrable_at_filter ‚ü®_, self_mem_nhds_within, hft.ae_strongly_measurable ht‚ü©
    (Œº.finite_at_nhds_within _ _),
end
lemma continuous_on.strongly_measurable_at_filter [topological_space Œ±]
  [opens_measurable_space Œ±] [topological_space Œ≤] [pseudo_metrizable_space Œ≤]
  [second_countable_topology_either Œ± Œ≤] {f : Œ± ‚Üí Œ≤} {s : set Œ±} {Œº : measure Œ±}
  (hs : is_open s) (hf : continuous_on f s) :
  ‚àÄ x ‚àà s, strongly_measurable_at_filter f (ùìù x) Œº :=
Œª x hx, ‚ü®s, is_open.mem_nhds hs hx, hf.ae_strongly_measurable hs.measurable_set‚ü©
lemma continuous_at.strongly_measurable_at_filter
  [topological_space Œ±] [opens_measurable_space Œ±] [second_countable_topology_either Œ± E]
  {f : Œ± ‚Üí E} {s : set Œ±} {Œº : measure Œ±} (hs : is_open s) (hf : ‚àÄ x ‚àà s, continuous_at f x) :
  ‚àÄ x ‚àà s, strongly_measurable_at_filter f (ùìù x) Œº :=
continuous_on.strongly_measurable_at_filter hs $ continuous_at.continuous_on hf
lemma continuous.strongly_measurable_at_filter [topological_space Œ±] [opens_measurable_space Œ±]
  [topological_space Œ≤] [pseudo_metrizable_space Œ≤] [second_countable_topology_either Œ± Œ≤]
  {f : Œ± ‚Üí Œ≤} (hf : continuous f) (Œº : measure Œ±) (l : filter Œ±) :
  strongly_measurable_at_filter f l Œº :=
hf.strongly_measurable.strongly_measurable_at_filter
lemma continuous_on.strongly_measurable_at_filter_nhds_within {Œ± Œ≤ : Type*} [measurable_space Œ±]
  [topological_space Œ±] [opens_measurable_space Œ±] [topological_space Œ≤] [pseudo_metrizable_space Œ≤]
  [second_countable_topology_either Œ± Œ≤] {f : Œ± ‚Üí Œ≤} {s : set Œ±} {Œº : measure Œ±}
  (hf : continuous_on f s) (hs : measurable_set s) (x : Œ±) :
  strongly_measurable_at_filter f (ùìù[s] x) Œº :=
‚ü®s, self_mem_nhds_within, hf.ae_strongly_measurable hs‚ü©
