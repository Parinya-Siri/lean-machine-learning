import algebra.homology.homological_complex
universes v u
open category_theory category_theory.limits
namespace homological_complex
variables {V : Type u} [category.{v} V] [has_zero_morphisms V]
variables {Œπ : Type*} {c : complex_shape Œπ} {Œπ' : Type*} {c' : complex_shape Œπ'}
@[simps]
def flip_obj (C : homological_complex (homological_complex V c) c') :
  homological_complex (homological_complex V c') c :=
{ X := Œª i,
  { X := Œª j, (C.X j).X i,
    d := Œª j j', (C.d j j').f i,
    shape' := Œª j j' w, by { rw C.shape j j' w, simp, },
    d_comp_d' := Œª j‚ÇÅ j‚ÇÇ j‚ÇÉ _ _, congr_hom (C.d_comp_d j‚ÇÅ j‚ÇÇ j‚ÇÉ) i, },
  d := Œª i i',
  { f := Œª j, (C.X j).d i i',
    comm' := Œª j j' h, ((C.d j j').comm i i').symm, },
  shape' := Œª i i' w, by { ext j, exact (C.X j).shape i i' w, } }.
variables V c c'
@[simps]
def flip : homological_complex (homological_complex V c) c' ‚•§
  homological_complex (homological_complex V c') c :=
{ obj := Œª C, flip_obj C,
  map := Œª C D f,
  { f := Œª i,
    { f := Œª j, (f.f j).f i,
      comm' := Œª j j' h, congr_hom (f.comm j j') i, }, }, }.
@[simps]
def flip_equivalence_unit_iso :
  ùü≠ (homological_complex (homological_complex V c) c') ‚âÖ flip V c c' ‚ãô flip V c' c :=
nat_iso.of_components
  (Œª C,
  { hom :=
    { f := Œª i, { f := Œª j, ùüô ((C.X i).X j), },
      comm' := Œª i j h, by { ext, dsimp, simp only [category.id_comp, category.comp_id] }, },
    inv :=
    { f := Œª i, { f := Œª j, ùüô ((C.X i).X j), },
      comm' := Œª i j h, by { ext, dsimp, simp only [category.id_comp, category.comp_id] }, } })
  (Œª X Y f, by { ext, dsimp, simp only [category.id_comp, category.comp_id], })
@[simps]
def flip_equivalence_counit_iso :
  flip V c' c ‚ãô flip V c c' ‚âÖ ùü≠ (homological_complex (homological_complex V c') c) :=
nat_iso.of_components
  (Œª C,
  { hom :=
    { f := Œª i, { f := Œª j, ùüô ((C.X i).X j), },
      comm' := Œª i j h, by { ext, dsimp, simp only [category.id_comp, category.comp_id] }, },
    inv :=
    { f := Œª i, { f := Œª j, ùüô ((C.X i).X j), },
      comm' := Œª i j h, by { ext, dsimp, simp only [category.id_comp, category.comp_id] }, } })
  (Œª X Y f, by { ext, dsimp, simp only [category.id_comp, category.comp_id], })
@[simps]
def flip_equivalence :
  homological_complex (homological_complex V c) c' ‚âå
    homological_complex (homological_complex V c') c :=
{ functor := flip V c c',
  inverse := flip V c' c,
  unit_iso := flip_equivalence_unit_iso V c c',
  counit_iso := flip_equivalence_counit_iso V c c', }
end homological_complex
